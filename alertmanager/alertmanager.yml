global:
  resolve_timeout: 30s

route:
  receiver: 'tg-bot'
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 30s
  repeat_interval: 30s
  routes:
    - match:
        severity: critical
      receiver: 'tg-bot'
      repeat_interval: 30s

receivers:
- name: 'tg-bot'
  telegram_configs:
  - bot_token: 'token'
    chat_id: id
    parse_mode: 'HTML'
    message: |
      {{ $alert := index .Alerts 0 }}
      ğŸš¨ <b>{{ .Status | toUpper }}</b>

      <b>Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ñ‚Ñ€ĞµĞ²Ğ¾Ğ³Ğµ:</b>
      ğŸ“¢ Type: {{ $alert.Labels.alertname }}
      âš ï¸  Severity: {{ $alert.Labels.severity }}
      ğŸ–¥ï¸  Host: {{ $alert.Labels.instance }}

      <b>Description:</b>
      {{ $alert.Annotations.summary }}
      ğŸ“ {{ $alert.Annotations.description }}

      ğŸ• Beginning: {{ $alert.StartsAt }}
      {{ if eq .Status "resolved" }}
      âœ… Solved: {{ $alert.EndsAt }}
      {{ end }}

inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname']
